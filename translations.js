// Language translations
const translations = {
    en: {
        // Header
        promoText: "üéÅ Special Offer: Order 3+ canvas and get 5% OFF! Order 5+ canvas and get 12% OFF! üéÅ",
        
        // Canvas Type
        canvasType: "Select Canvas Type",
        singleCanvas: "Single Canvas",
        multiCanvas: "Multiple Different Canvas",
        collageCanvas: "Collage Multiple Images",
        faqButton: "?",
        
        // Canvas Quantity
        selectQuantity: "How many different canvas?",
        collageQuantity: "How many canvas for collage?",
        discountText: "You get discount!",
        
        // Size Selection
        selectSize: "Select Size *",
        bestSeller: "Best Seller",
        
        // Two Person Canvas
        twoPersonLabel: "2 people on 1 canvas (+$10)",
        
        // Image Upload
        uploadImages: "Upload Images *",
        uploadText: "Click to upload images (Max 6)",
        uploadSubtext: "Supports JPG, PNG - Will be cropped to 8:10 ratio",
        
        // Custom Text
        customText: "Enter your text",
        customTextPlaceholder: "e.g., Forever Together",
        
        // Date
        date: "Date",
        datePlaceholder: "e.g., Dec 25, 2024",
        
        // Welcome Home
        welcomeHome: "Welcome Home",
        
        // Notes
        notes: "Additional Notes",
        notesPlaceholder: "Special instructions...",
        
        // Customer Info
        customerInfo: "Customer Information",
        fbName: "Your Facebook name *",
        fbNamePlaceholder: "Enter your Facebook name",
        email: "Email *",
        emailPlaceholder: "your@email.com",
        phone: "Phone number",
        phonePlaceholder: "Enter your phone number (optional)",
        
        // Price
        estimatedTotal: "Estimated Total",
        
        // Submit
        submit: "Submit Order",
        
        // Confirmation Modal
        confirmOrder: "Review Your Order",
        goBack: "Go Back",
        confirmSubmit: "Confirm Order",
        
        // Thank You Page
        thankYouTitle: "Thank You!",
        thankYouMessage: "Your order has been received successfully. We'll send your canvas preview to your email and Messenger within 2-3 business days.",
        newOrder: "Place Another Order",
        
        // FAQ Modal
        faqTitle: "Frequently Asked Questions",
        shippingTitle: "üöö <strong>Shipping</strong>",
        deliveryTime: "<strong>Delivery Time:</strong>",
        usDelivery: "US: 5‚Äì10 business days",
        intlDelivery: "International: 7‚Äì15 business days",
        orderTracking: "<strong>Order Tracking:</strong> Sent via email automatically after purchase",
        securePackaging: "<strong>Secure Packaging:</strong> Shock-resistant, moisture-proof, and gift-ready",
        
        paymentTitle: "üí≥ <strong>Payment</strong>",
        acceptedMethods: "<strong>Accepted Methods:</strong>",
        creditCards: "Credit / Debit Cards",
        paypal: "PayPal",
        applePay: "Apple Pay",
        secureCheckout: "<strong>Secure Checkout:</strong> All payments are encrypted and processed safely",
        fastEasy: "<strong>Fast & Easy:</strong> No account needed ‚Äî just a few quick steps",
        
        howItWorksTitle: "üßë‚Äçüé® <strong>How It Works</strong>",
        noLivePreview: "This canvas doesn't support live previews ‚Äî but don't worry!",
        designerEnhance: "‚úÖ Our designers will enhance your photo to look its very best.",
        completeDetails: "üìù Once you've completed the canvas details,",
        emailPreview: "üì© You'll receive a preview via email within 1‚Äì2 business days.",
        requestEdits: "üñºÔ∏è You can request edits until you're completely satisfied.",
        finalizeOrder: "‚úÖ Finalize your order and we'll take care of the rest.",
        
        backToForm: "Back to Form",
        
        // Error Modal
        validationErrors: "Validation Errors",
        fixErrors: "Please fix the following errors:",
        goToError: "Go to First Error",
        
        // Crop Modal
        cropImage: "Crop Your Image",
        cancel: "Cancel",
        apply: "Apply Crop"
    },
    
    es: {
        // Header
        promoText: "üéÅ Oferta Especial: ¬°Ordena 3+ lienzos y obt√©n 5% de descuento! ¬°Ordena 5+ lienzos y obt√©n 12% de descuento! üéÅ",
        
        // Canvas Type
        canvasType: "Seleccionar Tipo de Lienzo",
        singleCanvas: "Lienzo Individual",
        multiCanvas: "M√∫ltiples Lienzos Diferentes",
        collageCanvas: "Collage de M√∫ltiples Im√°genes",
        faqButton: "?",
        
        // Canvas Quantity
        selectQuantity: "¬øCu√°ntos lienzos diferentes?",
        collageQuantity: "¬øCu√°ntos lienzos para el collage?",
        discountText: "¬°Tienes descuento!",
        
        // Size Selection
        selectSize: "Seleccionar Tama√±o *",
        bestSeller: "M√°s Vendido",
        
        // Two Person Canvas
        twoPersonLabel: "2 personas en 1 lienzo (+$10)",
        
        // Image Upload
        uploadImages: "Subir Im√°genes *",
        uploadText: "Haz clic para subir im√°genes (M√°x. 6)",
        uploadSubtext: "Admite JPG, PNG - Se recortar√° a proporci√≥n 8:10",
        
        // Custom Text
        customText: "Ingresa tu texto",
        customTextPlaceholder: "ej., Juntos Para Siempre",
        
        // Date
        date: "Fecha",
        datePlaceholder: "ej., Dic 25, 2024",
        
        // Welcome Home
        welcomeHome: "Bienvenido a Casa",
        
        // Notes
        notes: "Notas Adicionales",
        notesPlaceholder: "Instrucciones especiales...",
        
        // Customer Info
        customerInfo: "Informaci√≥n del Cliente",
        fbName: "Tu nombre de Facebook *",
        fbNamePlaceholder: "Ingresa tu nombre de Facebook",
        email: "Correo electr√≥nico *",
        emailPlaceholder: "tu@correo.com",
        phone: "N√∫mero de tel√©fono",
        phonePlaceholder: "Ingresa tu n√∫mero de tel√©fono (opcional)",
        
        // Price
        estimatedTotal: "Total Estimado",
        
        // Submit
        submit: "Enviar Pedido",
        
        // Confirmation Modal
        confirmOrder: "Revisar Tu Pedido",
        goBack: "Regresar",
        confirmSubmit: "Confirmar Pedido",
        
        // Thank You Page
        thankYouTitle: "¬°Gracias!",
        thankYouMessage: "Tu pedido ha sido recibido exitosamente. Te enviaremos una vista previa de tu lienzo por correo electr√≥nico y Messenger dentro de 2-3 d√≠as h√°biles.",
        newOrder: "Hacer Otro Pedido",
        
        // FAQ Modal
        faqTitle: "Preguntas Frecuentes",
        shippingTitle: "üöö <strong>Env√≠o</strong>",
        deliveryTime: "<strong>Tiempo de Entrega:</strong>",
        usDelivery: "EE.UU.: 5‚Äì10 d√≠as h√°biles",
        intlDelivery: "Internacional: 7‚Äì15 d√≠as h√°biles",
        orderTracking: "<strong>Seguimiento del Pedido:</strong> Enviado por correo electr√≥nico autom√°ticamente despu√©s de la compra",
        securePackaging: "<strong>Embalaje Seguro:</strong> Resistente a golpes, a prueba de humedad y listo para regalo",
        
        paymentTitle: "üí≥ <strong>Pago</strong>",
        acceptedMethods: "<strong>M√©todos Aceptados:</strong>",
        creditCards: "Tarjetas de Cr√©dito / D√©bito",
        paypal: "PayPal",
        applePay: "Apple Pay",
        secureCheckout: "<strong>Pago Seguro:</strong> Todos los pagos est√°n encriptados y se procesan de forma segura",
        fastEasy: "<strong>R√°pido y F√°cil:</strong> No necesitas cuenta ‚Äî solo unos pocos pasos r√°pidos",
        
        howItWorksTitle: "üßë‚Äçüé® <strong>C√≥mo Funciona</strong>",
        noLivePreview: "Este lienzo no admite vistas previas en vivo ‚Äî ¬°pero no te preocupes!",
        designerEnhance: "‚úÖ Nuestros dise√±adores mejorar√°n tu foto para que luzca lo mejor posible.",
        completeDetails: "üìù Una vez que hayas completado los detalles del lienzo,",
        emailPreview: "üì© Recibir√°s una vista previa por correo electr√≥nico dentro de 1‚Äì2 d√≠as h√°biles.",
        requestEdits: "üñºÔ∏è Puedes solicitar ediciones hasta que est√©s completamente satisfecho.",
        finalizeOrder: "‚úÖ Finaliza tu pedido y nosotros nos encargamos del resto.",
        
        backToForm: "Volver al Formulario",
        
        // Error Modal
        validationErrors: "Errores de Validaci√≥n",
        fixErrors: "Por favor corrige los siguientes errores:",
        goToError: "Ir al Primer Error",
        
        // Crop Modal
        cropImage: "Recortar Tu Imagen",
        cancel: "Cancelar",
        apply: "Aplicar Recorte"
    }
};

// Language detection and switching
let currentLanguage = localStorage.getItem('selectedLanguage') || 'en';

// Apply translations
function applyTranslations() {
    document.querySelectorAll('[data-translate]').forEach(element => {
        const key = element.getAttribute('data-translate');
        if (translations[currentLanguage][key]) {
            element.innerHTML = translations[currentLanguage][key];
        }
    });
    
    // Apply placeholder translations
    document.querySelectorAll('[data-translate-placeholder]').forEach(element => {
        const key = element.getAttribute('data-translate-placeholder');
        if (translations[currentLanguage][key]) {
            element.placeholder = translations[currentLanguage][key];
        }
    });
}

// Switch language - UPDATED with active state fix
function switchLanguage(lang) {
    currentLanguage = lang;
    localStorage.setItem('selectedLanguage', lang);
    applyTranslations();
    
    // Update active state for language buttons
    document.querySelectorAll('.language-switcher button').forEach(btn => {
        btn.classList.remove('active');
        if (btn.textContent === lang.toUpperCase()) {
            btn.classList.add('active');
        }
    });
}

// Initialize translations on page load
document.addEventListener('DOMContentLoaded', function() {
    // Add language switcher if not exists
    if (!document.querySelector('.language-switcher')) {
        const switcher = document.createElement('div');
        switcher.className = 'language-switcher';
        switcher.innerHTML = `
            <button onclick="switchLanguage('en')" class="${currentLanguage === 'en' ? 'active' : ''}">EN</button>
            <button onclick="switchLanguage('es')" class="${currentLanguage === 'es' ? 'active' : ''}">ES</button>
        `;
        document.body.appendChild(switcher);
    }
    
    // Apply initial translations
    applyTranslations();
});

// Add language switcher styles
const style = document.createElement('style');
style.textContent = `
    .language-switcher {
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 1000;
        display: flex;
        gap: 5px;
        background: white;
        padding: 5px;
        border-radius: 20px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    
    .language-switcher button {
        padding: 5px 15px;
        border: none;
        background: transparent;
        cursor: pointer;
        border-radius: 15px;
        font-weight: 600;
        transition: all 0.3s ease;
    }
    
    .language-switcher button:hover {
        background: #f0f0f0;
    }
    
    .language-switcher button.active {
        background: #2C5F41;
        color: white;
    }
    
    @media (max-width: 768px) {
        .language-switcher {
            top: 10px;
            right: 10px;
        }
    }
`;
document.head.appendChild(style);

// Export for use in other scripts
window.translations = translations;
window.currentLanguage = currentLanguage;
window.switchLanguage = switchLanguage;
window.applyTranslations = applyTranslations;
