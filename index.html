<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JM-Canvas Order Form</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.css">
    <link rel="stylesheet" href="styles.css">
    <style>
        /* Inline styles for immediate font size increase */
        body {
            font-size: 18px !important;
        }
        
        .logo {
            max-width: 150px !important;
            height: auto !important;
        }
        
        .header h1 {
            font-size: 28px !important;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header with Logo -->
        <header class="header">
            <img src="logo.png" alt="JM-Canvas" class="logo">
            <h1>JM-Canvas</h1>
        </header>

        <!-- Promotional Banner -->
        <div class="promo-banner">
            <div class="promo-track">
                <div class="promo-text">
                    <span data-translate="promoText">üéÅ Special Offer: Order 3+ canvas and get 5% OFF! Order 5+ canvas and get 12% OFF! üéÅ</span>
                </div>
                <div class="promo-text">
                    <span data-translate="promoText">üéÅ Special Offer: Order 3+ canvas and get 5% OFF! Order 5+ canvas and get 12% OFF! üéÅ</span>
                </div>
            </div>
        </div>

        <!-- Main Content Container -->
        <div class="main-content">
            <!-- Form Container -->
            <div class="form-container">
                
                <!-- Canvas Type Selection with FAQ Button -->
                <div class="form-section">
                    <div class="section-header">
                        <h2 data-translate="canvasType">Select Canvas Type</h2>
                        <button class="faq-button" onclick="openFAQ()" data-translate="faqButton">?</button>
                    </div>
                    <div class="form-group">
                        <select id="canvasType" class="enhanced-select" onchange="handleCanvasTypeChange()">
                            <option value="single" data-translate="singleCanvas">Single Canvas</option>
                            <option value="multi" data-translate="multiCanvas">Multiple Different Canvas</option>
                            <option value="collage" data-translate="collageCanvas">Collage Multiple Images</option>
                        </select>
                    </div>
                    
                    <!-- Multi Canvas Quantity (hidden by default) -->
                    <div id="multiCanvasSection" style="display: none;">
                        <div class="form-group">
                            <label data-translate="selectQuantity">How many different canvas?</label>
                            <select id="canvasQuantity" class="enhanced-select" onchange="updateCanvasCount()">
                                <option value="2">2 Canvas</option>
                                <option value="3">3 Canvas</option>
                                <option value="4">4 Canvas</option>
                                <option value="5">5 Canvas</option>
                                <option value="6">6 Canvas</option>
                                <option value="7">7 Canvas</option>
                                <option value="8">8 Canvas</option>
                                <option value="9">9 Canvas</option>
                                <option value="10">10 Canvas</option>
                            </select>
                        </div>
                        <div id="discountNotification" class="discount-notification" style="display: none;">
                            <span class="discount-icon">üéâ</span>
                            <span class="discount-text" data-translate="discountText"></span>
                        </div>
                    </div>
                </div>

                <!-- Canvas Tabs (for multi canvas) -->
                <div id="canvasTabs" class="canvas-tabs" style="display: none;">
                    <div class="tab active" onclick="switchCanvas(0)">Canvas 1</div>
                </div>

                <!-- Canvas Items Container -->
                <div id="canvasItemsContainer" class="canvas-items-container">
                    
                    <!-- Size Selection -->
                    <div class="form-section canvas-item" data-canvas="0">
                        <h2 data-translate="selectSize">Select Size *</h2>
                        <div class="size-grid">
                            <div class="size-option" data-size="8x10" onclick="selectSize('8x10', 0)">
                                <div class="size-display">8x10 inches</div>
                                <div class="collage-price" style="display: none;">+$5 for collage</div>
                            </div>
                            <div class="size-option" data-size="11x14" onclick="selectSize('11x14', 0)">
                                <div class="size-display">11x14 inches</div>
                                <div class="best-seller" data-translate="bestSeller">Best Seller</div>
                                <div class="collage-price" style="display: none;">+$5 for collage</div>
                            </div>
                            <div class="size-option" data-size="16x20" onclick="selectSize('16x20', 0)">
                                <div class="size-display">16x20 inches</div>
                                <div class="collage-price" style="display: none;">+$5 for collage</div>
                            </div>
                            <div class="size-option" data-size="20x30" onclick="selectSize('20x30', 0)">
                                <div class="size-display">20x30 inches</div>
                                <div class="collage-price" style="display: none;">+$5 for collage</div>
                            </div>
                        </div>
                        <div class="selected-price" id="selectedPrice-0" style="display: none;"></div>
                        <div class="validation-error" id="size-error-0"></div>
                    </div>

                    <!-- Two Person Canvas Checkbox -->
                    <div class="form-section canvas-item" data-canvas="0" id="twoPersonSection-0">
                        <div class="checkbox-wrapper">
                            <input type="checkbox" id="twoPersonCanvas-0" onchange="handleTwoPersonChange(0)">
                            <label for="twoPersonCanvas-0" data-translate="twoPersonLabel">2 people on 1 canvas (+$10)</label>
                        </div>
                    </div>

                    <!-- Image Upload Section -->
                    <div class="form-section canvas-item" data-canvas="0">
                        <h2 data-translate="uploadImages">Upload Images *</h2>
                        <div class="upload-container">
                            <div class="upload-area" onclick="triggerFileInput(0)">
                                <div class="upload-icon">üì∑</div>
                                <div class="upload-text" data-translate="uploadText">Click to upload images (Max 6)</div>
                                <div class="upload-subtext" data-translate="uploadSubtext">Supports JPG, PNG - Will be cropped to 8:10 ratio</div>
                            </div>
                            <input type="file" id="imageInput-0" multiple accept="image/jpeg,image/jpg,image/png" style="display: none;" onchange="handleImageUpload(event, 0)">
                            
                            <!-- Image Thumbnails -->
                            <div class="image-thumbnails" id="imageThumbnails-0">
                                <!-- Thumbnails will be added here -->
                            </div>
                        </div>
                        <div class="validation-error" id="image-error-0"></div>
                    </div>

                    <!-- Custom Text -->
                    <div class="form-section canvas-item" data-canvas="0">
                        <div class="form-group">
                            <label data-translate="customText">Enter your text</label>
                            <input type="text" id="customText-0" maxlength="50" placeholder="e.g., Forever Together" data-translate-placeholder="customTextPlaceholder" oninput="updateCharCount(0); updateLivePreview(0)">
                            <div class="char-counter">
                                <span id="charCount-0">0</span>/50
                            </div>
                        </div>
                    </div>

                    <!-- Live Preview Box for Canvas 0 -->
                    <div class="form-section canvas-item live-preview-section" data-canvas="0">
                        <div class="live-preview-box" id="livePreview-0" style="height: 90px;">
                            <div class="preview-text" id="previewText-0" style="opacity: 0.5;">Your text will appear here</div>
                            <div class="preview-date" id="previewDate-0" style="opacity: 0.5;">Date will appear here</div>
                        </div>
                    </div>

                    <!-- Date -->
                    <div class="form-section canvas-item" data-canvas="0" id="dateSection-0">
                        <div class="form-group">
                            <label data-translate="date">Date</label>
                            <input type="text" id="date-0" placeholder="e.g., Dec 25, 2024" data-translate-placeholder="datePlaceholder" oninput="updateLivePreview(0)">
                        </div>
                    </div>

                    <!-- Welcome Home -->
                    <div class="form-section canvas-item" data-canvas="0" id="welcomeHomeSection-0">
                        <div class="checkbox-wrapper">
                            <input type="checkbox" id="welcomeHome-0">
                            <label for="welcomeHome-0" data-translate="welcomeHome">Welcome Home</label>
                        </div>
                    </div>

                </div>

                <!-- Mini Canvas Navigator (for multi canvas) -->
                <div id="miniCanvasNav" class="mini-canvas-nav" style="display: none;">
                    <div class="mini-nav-container">
                        <span class="canvas-counter">Canvas <span id="currentCanvasNum">1</span>/<span id="totalCanvasNum">1</span></span>
                        <div class="mini-tabs" id="miniTabs">
                            <!-- Mini tabs will be generated here -->
                        </div>
                    </div>
                </div>

                <!-- Notes Section -->
                <div class="form-section">
                    <div class="form-group">
                        <label data-translate="notes">Additional Notes</label>
                        <textarea id="notes" rows="3" placeholder="Special instructions..." data-translate-placeholder="notesPlaceholder"></textarea>
                    </div>
                </div>

                <!-- Customer Info -->
                <div class="form-section">
                    <h2 data-translate="customerInfo">Customer Information</h2>
                    <div class="form-group">
                        <label data-translate="fbName">Your Facebook name *</label>
                        <input type="text" id="fbName" placeholder="Enter your Facebook name" required data-translate-placeholder="fbNamePlaceholder">
                        <div class="validation-error" id="fbName-error"></div>
                    </div>
                    <div class="form-group">
                        <label data-translate="email">Email *</label>
                        <input type="email" id="email" required placeholder="your@email.com" data-translate-placeholder="emailPlaceholder">
                        <div class="validation-error" id="email-error"></div>
                    </div>
                    <div class="form-group">
                        <label data-translate="phone">Phone number</label>
                        <input type="tel" id="phone" placeholder="Enter your phone number (optional)" data-translate-placeholder="phonePlaceholder" style="width: 100%; padding: 12px 15px; font-size: 18px; border: 2px solid #ddd; border-radius: 8px; transition: border-color 0.3s ease;" pattern="^[+0-9\s-]*$" maxlength="20" autocomplete="tel">
                        <div class="validation-error" id="phone-error"></div>
                    </div>
                </div>

                <!-- Price Summary - UPDATED -->
                <div class="price-summary-bottom">
                    <span data-translate="estimatedTotal">Estimated Total</span>: 
                    <span class="total-price-display" id="totalPrice">$0</span>
                </div>

                <!-- Submit Button -->
                <button class="submit-btn" onclick="confirmOrder()" data-translate="submit">Submit Order</button>
            </div>
        </div>
    </div>

    <!-- Error Summary Modal -->
    <div id="errorModal" class="modal">
        <div class="modal-content error-modal-content">
            <div class="modal-header">
                <h3 data-translate="validationErrors">Validation Errors</h3>
                <span class="close" onclick="closeErrorModal()">&times;</span>
            </div>
            <div class="error-summary">
                <p data-translate="fixErrors">Please fix the following errors:</p>
                <ul id="errorList"></ul>
            </div>
            <div class="modal-footer">
                <button onclick="goToFirstError()" class="primary-btn" data-translate="goToError">Go to First Error</button>
            </div>
        </div>
    </div>

    <!-- FAQ Modal -->
    <div id="faqModal" class="modal">
        <div class="modal-content faq-content">
            <div class="modal-header">
                <h3 data-translate="faqTitle">Frequently Asked Questions</h3>
                <span class="close" onclick="closeFAQ()">&times;</span>
            </div>
            <div class="faq-body">
                <!-- Shipping Section -->
                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFAQ(this)">
                        <span data-translate="shippingTitle">üöö <strong>Shipping</strong></span>
                        <span class="faq-toggle">+</span>
                    </div>
                    <div class="faq-answer">
                        <p data-translate="deliveryTime"><strong>Delivery Time:</strong></p>
                        <ul>
                            <li data-translate="usDelivery">US: 5‚Äì10 business days</li>
                            <li data-translate="intlDelivery">International: 7‚Äì15 business days</li>
                        </ul>
                        <p data-translate="orderTracking"><strong>Order Tracking:</strong> Sent via email automatically after purchase</p>
                        <p data-translate="securePackaging"><strong>Secure Packaging:</strong> Shock-resistant, moisture-proof, and gift-ready</p>
                    </div>
                </div>

                <!-- Payment Section -->
                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFAQ(this)">
                        <span data-translate="paymentTitle">üí≥ <strong>Payment</strong></span>
                        <span class="faq-toggle">+</span>
                    </div>
                    <div class="faq-answer">
                        <p data-translate="acceptedMethods"><strong>Accepted Methods:</strong></p>
                        <ul>
                            <li data-translate="creditCards">Credit / Debit Cards</li>
                            <li data-translate="paypal">PayPal</li>
                            <li data-translate="applePay">Apple Pay</li>
                        </ul>
                        <p data-translate="secureCheckout"><strong>Secure Checkout:</strong> All payments are encrypted and processed safely</p>
                        <p data-translate="fastEasy"><strong>Fast & Easy:</strong> No account needed ‚Äî just a few quick steps</p>
                    </div>
                </div>

                <!-- How It Works Section -->
                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFAQ(this)">
                        <span data-translate="howItWorksTitle">üßë‚Äçüé® <strong>How It Works</strong></span>
                        <span class="faq-toggle">+</span>
                    </div>
                    <div class="faq-answer">
                        <p data-translate="noLivePreview">This canvas doesn't support live previews ‚Äî but don't worry!</p>
                        <p data-translate="designerEnhance">‚úÖ Our designers will enhance your photo to look its very best.</p>
                        <p data-translate="completeDetails">üìù Once you've completed the canvas details,</p>
                        <p data-translate="emailPreview">üì© You'll receive a preview via email within 1‚Äì2 business days.</p>
                        <p data-translate="requestEdits">üñºÔ∏è You can request edits until you're completely satisfied.</p>
                        <p data-translate="finalizeOrder">‚úÖ Finalize your order and we'll take care of the rest.</p>
                    </div>
                </div>
            </div>
            <div class="faq-footer">
                <button onclick="closeFAQ()" class="primary-btn" data-translate="backToForm">Back to Form</button>
            </div>
        </div>
    </div>

    <!-- Crop Modal -->
    <div id="cropModal" class="modal">
        <div class="modal-content crop-modal-content">
            <h3 data-translate="cropImage">Crop Your Image</h3>
            <div class="crop-wrapper">
                <div class="crop-container">
                    <img id="cropImage" style="max-width: 100%;">
                </div>
                <div class="crop-tools">
                    <button onclick="rotateCrop(-90)" class="tool-btn" title="Rotate Left">
                        <span>‚Ü∫</span>
                    </button>
                    <button onclick="rotateCrop(90)" class="tool-btn" title="Rotate Right">
                        <span>‚Üª</span>
                    </button>
                    <button onclick="resetCrop()" class="tool-btn" title="Reset">
                        <span>‚ü≤</span>
                    </button>
                </div>
            </div>
            <div class="crop-buttons">
                <button onclick="cancelCrop()" data-translate="cancel">Cancel</button>
                <button onclick="applyCrop()" class="primary-btn" data-translate="apply">Apply Crop</button>
            </div>
        </div>
    </div>

    <!-- Confirmation Modal -->
    <div id="confirmModal" class="modal">
        <div class="modal-content confirm-content">
            <h3 data-translate="confirmOrder">Review Your Order</h3>
            <div id="orderSummary"></div>
            <div class="confirm-buttons">
                <button onclick="closeConfirmModal()" data-translate="goBack">Go Back</button>
                <button onclick="submitOrder()" class="primary-btn" data-translate="confirmSubmit">Confirm Order</button>
            </div>
        </div>
    </div>

    <!-- Thank You Page -->
    <div id="thankYouPage" class="thank-you-page" style="display: none;">
        <div class="thank-you-content">
            <div class="thank-you-icon">‚úÖ</div>
            <h2 data-translate="thankYouTitle">Thank You!</h2>
            <p data-translate="thankYouMessage">
                Your order has been received successfully. We'll send your canvas preview to your email and Messenger within 2-3 business days.
            </p>
            <button onclick="startNewOrder()" class="primary-btn" data-translate="newOrder">Place Another Order</button>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.js"></script>
    <script>
        // Update collage price display when canvas type changes
        function updateCollagePriceDisplay() {
            const canvasType = document.getElementById('canvasType').value;
            const collagePrices = document.querySelectorAll('.collage-price');
            
            collagePrices.forEach(price => {
                price.style.display = canvasType === 'collage' ? 'block' : 'none';
            });
        }
        
        // Add to existing handleCanvasTypeChange function
        const originalHandleCanvasTypeChange = window.handleCanvasTypeChange;
        window.handleCanvasTypeChange = function() {
            if (originalHandleCanvasTypeChange) {
                originalHandleCanvasTypeChange();
            }
            updateCollagePriceDisplay();
            
            // Update field visibility based on canvas type
            const canvasType = document.getElementById('canvasType').value;
            const isCollage = canvasType === 'collage';
            
            // Update fields for all existing canvas items
            document.querySelectorAll('[id^="dateSection-"]').forEach(section => {
                section.style.display = isCollage ? 'none' : 'block';
            });
            
            document.querySelectorAll('[id^="welcomeHomeSection-"]').forEach(section => {
                section.style.display = isCollage ? 'none' : 'block';
            });
            
            document.querySelectorAll('[id^="twoPersonSection-"]').forEach(section => {
                section.style.display = isCollage ? 'none' : 'block';
            });
            
            // Update live preview for collage
            const livePreviewBox = document.getElementById('livePreview-0');
            if (livePreviewBox) {
                if (isCollage) {
                    livePreviewBox.style.height = '50px';
                    livePreviewBox.classList.add('collage-preview');
                    const datePreview = document.getElementById('previewDate-0');
                    if (datePreview) datePreview.style.display = 'none';
                } else {
                    livePreviewBox.style.height = '90px';
                    livePreviewBox.classList.remove('collage-preview');
                    const datePreview = document.getElementById('previewDate-0');
                    if (datePreview) datePreview.style.display = 'block';
                }
            }
        }
    </script>
    <script src="translations.js"></script>
    <script src="script.js"></script>
</body>
</html>
